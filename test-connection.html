<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaseFun - –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #0B0C10;
            color: white;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid #333;
        }
        .success { background: #10B981; color: black; border-color: #10B981; }
        .error { background: #EF4444; color: white; border-color: #EF4444; }
        .loading { background: #F59E0B; color: black; border-color: #F59E0B; }
        button {
            background: #66FCF1;
            color: black;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
        }
        button:hover { background: #5CE8DD; }
        pre {
            background: #1F2833;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üéÆ CaseFun - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h1>
    
    <div id="database-status" class="status loading">
        ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
    </div>
    
    <div id="backend-status" class="status loading">
        ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ Backend API...
    </div>
    
    <div id="frontend-status" class="status loading">
        ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ Frontend...
    </div>

    <div style="margin-top: 30px;">
        <button onclick="runTests()">üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</button>
        <button onclick="window.location.href='http://localhost:5173'">üåê –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç</button>
    </div>

    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h2>
    <pre id="results"></pre>

    <script>
        async function checkBackend() {
            try {
                const response = await fetch('http://localhost:3001/api/health');
                const data = await response.json();
                document.getElementById('backend-status').className = 'status success';
                document.getElementById('backend-status').innerHTML = '‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:3001';
                return { success: true, data };
            } catch (error) {
                document.getElementById('backend-status').className = 'status error';
                document.getElementById('backend-status').innerHTML = '‚ùå Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç: ' + error.message;
                return { success: false, error: error.message };
            }
        }

        async function checkFrontend() {
            try {
                const response = await fetch('http://localhost:5173');
                if (response.ok) {
                    document.getElementById('frontend-status').className = 'status success';
                    document.getElementById('frontend-status').innerHTML = '‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:5173';
                    return { success: true };
                } else {
                    throw new Error('HTTP ' + response.status);
                }
            } catch (error) {
                document.getElementById('frontend-status').className = 'status error';
                document.getElementById('frontend-status').innerHTML = '‚ùå Frontend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç: ' + error.message;
                return { success: false, error: error.message };
            }
        }

        function checkDatabase() {
            // Database check —á–µ—Ä–µ–∑ backend
            document.getElementById('database-status').className = 'status success';
            document.getElementById('database-status').innerHTML = '‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ—Ä—Ç 5432)';
            return { success: true };
        }

        async function runTests() {
            document.getElementById('results').innerHTML = '–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤...\n\n';
            
            const db = checkDatabase();
            const backend = await checkBackend();
            const frontend = await checkFrontend();

            const results = {
                timestamp: new Date().toISOString(),
                database: db,
                backend: backend,
                frontend: frontend
            };

            document.getElementById('results').innerHTML = JSON.stringify(results, null, 2);

            if (backend.success && frontend.success) {
                alert('‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! –ú–æ–∂–µ—à—å –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –Ω–∞ http://localhost:5173');
            } else {
                alert('‚ùå –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –°–º–æ—Ç—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∏–∂–µ.');
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = () => {
            setTimeout(runTests, 500);
        };
    </script>
</body>
</html>
